<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Untitled Document</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <link href="css/goable.css" rel="stylesheet">
    <link href="css/clock.css" rel="stylesheet">
    <!--	jquery-->
    <script type="text/javascript" src="lib/jquery.js"></script>
    <script type="text/javascript" src="js/shadow.js"></script>
    <!--    <script type="text/javascript" src="js/clock.js"></script>-->


    <!--	mobiscroll-->
    <link href="lib/mobiscroll/dev/css/mobiscroll.core-2.6.2.css" rel="stylesheet">
    <link href="lib/mobiscroll/dev/css/mobiscroll.animation-2.6.2.css" rel="stylesheet">
    <link href="lib/mobiscroll/dev/css/mobiscroll.clock.css" rel="stylesheet">
    <script type="text/javascript" src="lib/mobiscroll/dev/js/mobiscroll.core-2.6.2.js"></script>
    <script type="text/javascript" src="lib/mobiscroll/dev/js/mobiscroll.datetime-2.6.2.js"></script>

    <!--	self-->

    <script type="text/javascript" src="js/myChart.js"></script>

</head>

<body>
    <div>
        <input type="text" id='searchData' value="" class="dataSelinput" style="display:none;">
    </div>
    <ul class="clockOptions">
        <li class="tapLi" id='repeatDay'>
            重复
            <span>周一 周二 周三 周四 周五 周六 </span>
        </li>
        <li class="myRadio">
            类型
            <label for='wakeUp'><span>起床<i class="wxRadio checkd"></i></span>
                <input type="radio" name='clockType' value="0" id='wakeUp'>
            </label>
            <label for='medicine'><span>吃药<i class="wxRadio"></i></span>
                <input type="radio" name='clockType' value="1" id='medicine'>
            </label>

        </li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li>1</li>
        <li class="tapLi" id='tip'>
            备注
            <span></span>
        </li>
        
    </ul>

    <!--   重复弹出-->
    <div class="repeatDay" id='rdpopUp'>
        <h6>重复</h6>
        <ul class="myCheckbox">
            <li class='clearfix'>
                <label for="FF"><span>周一</span>
                    <i class="wxCheckbox fr mt8"></i>
                    <input type="checkbox" name="repeatday" id='FF' value="周一">
                </label>
            </li>
            <li class='clearfix'>
                <label for="GG"><span>周二</span>
                    <i class="wxCheckbox fr mt8"></i>
                    <input type="checkbox" name="repeatday" id='GG' value="周二">
                </label>
            </li>
            <li class='clearfix'>
                <label for="HH"><span>周三</span>
                    <i class="wxCheckbox fr mt8"></i>
                    <input type="checkbox" name="repeatday" id='HH' value="周三">
                </label>
            </li>
            <li class='clearfix'>
                <label for="II"><span>周四</span>
                    <i class="wxCheckbox fr mt8"></i>
                    <input type="checkbox" name="repeatday" id='II' value="周四">
                </label>
            </li>
            <li class='clearfix'>
                <label for="JJ"><span>周五</span>
                    <i class="wxCheckbox fr mt8"></i>
                    <input type="checkbox" name="repeatday" id='JJ' value="周五">
                </label>
            </li>
            <li class='clearfix'>
                <label for="KK"><span>周六</span>
                    <i class="wxCheckbox fr mt8"></i>
                    <input type="checkbox" name="repeatday" id='KK' value="周六">
                </label>
            </li>
            <li class='clearfix'>
                <label for="EE"><span>周日</span>
                    <i class="wxCheckbox fr mt8"></i>
                    <input type="checkbox" name="repeatday" id='EE' value="周日">
                </label>
            </li>
            <li class="twobtn">
                <a href="#" class="btnCancal">取消</a><a href="#" class="btnOK">确定</a>
            </li>
        </ul>
    </div>

    <!--    备注弹出-->
    <div class="repeatDay" id='tippopUp'>
        <h6>闹钟备注</h6>
        <ul>
            <li class="myText">
                <input type="text" placeholder="请输入闹钟备注" maxlength="13">
            </li>
            <li class="twobtn"><a href="javascript:void(0)" class="btnCancal">取消</a><a href="javascript:void(0)" class="btnOK">确定</a></li>
        </ul>
    </div>

    <div class="pb38"></div>
    <a href="#" class="blueBtn pob">确定</a>
    <script type="text/javascript">
        $(function () {
            
            $('.blueBtn').on('click',function(){
                console.log(clock.colckSet);
            })
//            重复日期
            var rd = {}; 
            
//            闹钟数据类
            function setObj(settingObj) {
                var self = this;
                this.colckSet = {
                    date: '6:30',
                    repeatDay: {
                        EE: 1,
                        FF: 0,
                        GG: 0,
                        HH: 1,
                        II: 0,
                        JJ: 0,
                        KK: 0,
                    },
                    clockType: 1,
                    tip: '跑步,运动生命之源！'
                };

                init();

                //                初始化
                function init() {
                    setRepeatDay(self.colckSet);
                    setClockType(self.colckSet);
                    setTip(self.colckSet);
                }

                //                初始化时间
                function date(params) {}

                //                初始化多选
                function setRepeatDay(params) {
                    var repeatDay = $('input[name="repeatday"]');
                    var repeatStr = '';

                    for (var i = 0, len = repeatDay.length; i < len; i++) {
                        repeatDay[i].checked = params.repeatDay[repeatDay[i].id];
                        if (repeatDay[i].checked) {
                            $(repeatDay[i]).parent().find('.wxCheckbox').addClass('checkd');
                            repeatStr += repeatDay[i].value + ' ';
                        } else {
                            $(repeatDay[i]).parent().find('.wxCheckbox').removeClass('checkd');
                        }
                    }

                    $('#repeatDay').find('span').html(repeatStr);
                }

                this.setRepeatDay = setRepeatDay;

                //                初始化单选
                function setClockType(params) {
                    var clockType = $('input[name="clockType"]');
                    for (var i = 0, len = clockType.length; i < len; i++) {
                        clockType[i].checked = false;
                        $(clockType[i]).parent().find('.wxRadio').removeClass('checkd');
                    }
                    clockType[params.clockType].checked = true;
                    $(clockType[params.clockType]).parent().find('.wxRadio').addClass('checkd');
                }
                //                初始化备注
                function setTip(params) {
                    if (params.tip) {
                        $('#tip').find('> span').html(params.tip);
                        $('#tippopUp').find('input[type="text"]').val(params.tip);
                    }
                }

                this.setTip = setTip;
            }

            setObj.prototype.updateColckSet = function (obj) {
                for (var i in this.colckSet) {
                    for (var j in obj) {
                        if (i === j) {
                            this.colckSet[i] = obj[j];
                        }
                    }
                }
            };

            setObj.prototype.getColckSet = function () {
                return this.colckSet;
            };

            var clock = new setObj();



            //        时间控件
            var myopt = {
                preset: 'time',
                theme: 'wp',
                theme: 'wp',
                display: 'top',
                timeWheels: 'HHii',
                timeFormat: 'HH:ii',
                hourText: '时',
                minuteText: '分',
                setText: '确定',
                cancelText: '取消',
                dateFormat: 'yy-mm-dd',
                dateOrder: 'yymmdd',
                onChange: function (valueText, inst) {
                    clock.updateColckSet({date:valueText});
                }
            };
            $('#searchData').val(clock.colckSet.date);
            $('#searchData').mobiscroll(myopt);
            var inst = $('#searchData').mobiscroll('getInst');
            inst.settings.inputShow = true;
            inst.show(true);
            $('<div class="selbg"></div>').appendTo($('.dwwc'));
            $('.dw-persp').height(0);

            //            弹出层
            $('#repeatDay').shadow('top','#rdpopUp', '.btnCancal', '.btnOK',function(){
                clock.setRepeatDay(clock.colckSet);
                console.log('c!')
            },function(){
                clock.updateColckSet({
                    repeatDay: rd
                });
                clock.setRepeatDay(clock.colckSet);
                console.log('!');
            });
            
            $('#tip').shadow('center','#tippopUp', '.btnCancal', '.btnOK', function () {
                var orinVal = $('#tip').find('> span').html();
                $('#tippopUp').find('input[type="text"]').val(orinVal);
                console.log('c!!')
            }, function () {
                clock.updateColckSet({
                    tip: $('#tippopUp').find('input[type="text"]').val()
                });
                clock.setTip(clock.colckSet);
                console.log('!!');
            });






            //            单选
            $('label').on('click', function (e) {
                if (e.target.tagName != "INPUT") {
                    return;
                }
                $(this).parents('.myRadio').find('input[type="radio"]').each(function (i, e) {
                    if (e.checked) {
                        $(e).parent().find('.wxRadio').addClass('checkd');
                        clock.updateColckSet({
                            clockType: e.value
                        });
                    } else {
                        $(e).parent().find('.wxRadio').removeClass('checkd');
                    }

                })
            })

            //            多选
            
            $('label').on('click', function (e) {
                if (e.target.tagName != "INPUT") {
                    return;
                }
                $(this).parents('.myCheckbox').find('input[type="checkbox"]').each(function (i, e) {
                    if (e.checked) {
                        $(e).parent().find('.wxCheckbox').addClass('checkd');
                    } else {
                        $(e).parent().find('.wxCheckbox').removeClass('checkd');
                    }
                    rd[e.id] = e.checked + 0;
                })
                
            })
        })
    </script>
</body>

</html>